(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{67:function(t,e,a){"use strict";a.r(e),a.d(e,"frontMatter",(function(){return l})),a.d(e,"metadata",(function(){return c})),a.d(e,"rightToc",(function(){return o})),a.d(e,"default",(function(){return u}));var n=a(2),r=a(6),b=(a(0),a(75)),l={},c={unversionedId:"user_guide",id:"user_guide",isDocsHomePage:!1,title:"user_guide",description:"User Guide By Examples",source:"@site/docs/user_guide.md",slug:"/user_guide",permalink:"/docs/docs/user_guide",editUrl:"https://github.com/SynFutures/docs/edit/master/docs/docs/user_guide.md",version:"current"},o=[{value:"Liquidity Providers",id:"liquidity-providers",children:[]},{value:"Traders",id:"traders",children:[]}],i={rightToc:o};function u(t){var e=t.components,a=Object(r.a)(t,["components"]);return Object(b.b)("wrapper",Object(n.a)({},i,a,{components:e,mdxType:"MDXLayout"}),Object(b.b)("h1",{id:"user-guide-by-examples"},"User Guide By Examples"),Object(b.b)("h2",{id:"liquidity-providers"},"Liquidity Providers"),Object(b.b)("p",null,"As a liquidity provider, you can pick any BASE/QUOTE trading pair with any exipry date allowed to add your QUOTE assets into the pool. "),Object(b.b)("p",null,'If you choose ETH/USDC trading pair with 2021-12-31 UTC 08:00 as the expiry, you may find that such pair does not exist yet. Then you use the "Create Pair" button to create and init such pair. Except for the BASE/QUOTE and expiry data, you also need to specify the initPrice and amount you want to add to the pool. The initPrice should not deviate too much from the current index price. '),Object(b.b)("blockquote",null,Object(b.b)("p",{parentName:"blockquote"},"Suppose the initPrice is 500, and initAmount is 1050.\uff08TODO: no place to specify leverage?\uff09 After related txs are successfully processed, you may find the amm's account holds 1 LONG position with 1000 balance,  and your own account holds 1 SHORT position with 50 balance. Except this, you also get 1 LP token as the credential for provding liquidity for this pool. "),Object(b.b)("table",{parentName:"blockquote"},Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"account"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"position"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"balance"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"entryNotional"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Amm"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"1"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"1000"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"500")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"You"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-1"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"50"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"500"))))),Object(b.b)("p",null,'Since the pool is already initated, you can add more liquidity through two methods: one for normal add liquidity\uff0cthe other for depositAndAdd. The latter one combines the deposit function and add liquidity function into one function.  If you have already deposited some tokens into this pair, you may add liquidity direclty. Otherwise, depositAndAdd suits for you. To use depositAndAdd, you need to specify an extra "leverage" parameter which determines the position & balance finally added to the amm\' s account and your owns. For detailed calculation, please refer to faq: For liquidator and system maintaniner.'),Object(b.b)("blockquote",null,Object(b.b)("p",{parentName:"blockquote"},"Suppose you choose to deposit and add liquidity separately, and after you deposit 500 USDC to your account:"),Object(b.b)("table",{parentName:"blockquote"},Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"account"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"position"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"balance"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"entryNotional"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Amm"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"1"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"1000"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"500")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"You"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-1"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"550"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"500")))),Object(b.b)("p",{parentName:"blockquote"},"Then you decide to add the newly 500 USDC into the pool, but this tx will revert during execution, since you don't have enough margin for the newly generated SHORT position in your account. So you add 450 USDC into the pool instead, leaving 50 USDC in your account as margin:"),Object(b.b)("table",{parentName:"blockquote"},Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"account"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"position"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"balance"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"entryNotional"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Amm"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"1.45"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"1450"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"725")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"You"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-1.45"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"100"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"725"))))),Object(b.b)("p",null,'If you want to get your money back, you can use the "Remove Liquidity" function, given the amount of LP token you\'d like to burn  you may get part of your money back. '),Object(b.b)("blockquote",null,Object(b.b)("p",{parentName:"blockquote"},"Suppose you want to burn 1 LP token, for this tx, position removed from amm's account is  1 / 1.45 ",Object(b.b)("em",{parentName:"p"}," 1.45 = 1, together with 1 ")," 500 * 2 =1000 USDC transfered to your account."),Object(b.b)("table",{parentName:"blockquote"},Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"account"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"position"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"balance"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"entryNotional"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Amm"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"0.45"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"450"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"225")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"You"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-0.45"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"1100"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"225"))))),Object(b.b)("p",null,'You are allowed to either add liquidity and remove liquidity when the trading pair is on NORMAL status. When it goes into SETTLING status, you are not allowed to add liquidity. And after the pair is SETTLED, you can not remove liquidity any more. Since all amm\'s positions are setteled at the moment trading pair enters SETTLED, you should use "Settle Share" instead to get all your money back. '),Object(b.b)("blockquote",null,Object(b.b)("p",{parentName:"blockquote"},"Table below shows the accounts when pair is already settled with 500 as the settlement price:"),Object(b.b)("table",{parentName:"blockquote"},Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"account"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"position"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"balance"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"entryNotional"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Amm"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"0"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"450"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"0")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"You"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-0.45"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"1100"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"225")))),Object(b.b)("p",{parentName:"blockquote"},'Then you need to settle your own share with 0.45 LP token with "Settle Share" button:'),Object(b.b)("table",{parentName:"blockquote"},Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"account"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"position"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"balance"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"entryNotional"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Amm"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"0"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"0"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"0")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"You"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-0.45"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"1550"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"225")))),Object(b.b)("p",{parentName:"blockquote"},'There are 0.45 SHORT position left in your account, so you also need to settle your positions with "settle" button, it will calculate your pnl with positions left and add it to your balance, also clear your positions, since the settlement price is 500 as before, pnl for you is 0, and together with the withdraw function, you may find 1550 USDC returned to your own address with your system account left with all 0:'),Object(b.b)("table",{parentName:"blockquote"},Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"account"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"position"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"balance"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"entryNotional"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Amm"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"0"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"0"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"0")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"You"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"0"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"0"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"0"))))),Object(b.b)("h2",{id:"traders"},"Traders"))}u.isMDXComponent=!0},75:function(t,e,a){"use strict";a.d(e,"a",(function(){return d})),a.d(e,"b",(function(){return j}));var n=a(0),r=a.n(n);function b(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){b(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},b=Object.keys(t);for(n=0;n<b.length;n++)a=b[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(t);for(n=0;n<b.length;n++)a=b[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var i=r.a.createContext({}),u=function(t){var e=r.a.useContext(i),a=e;return t&&(a="function"==typeof t?t(e):c(c({},e),t)),a},d=function(t){var e=u(t.components);return r.a.createElement(i.Provider,{value:e},t.children)},p={inlineCode:"code",wrapper:function(t){var e=t.children;return r.a.createElement(r.a.Fragment,{},e)}},O=r.a.forwardRef((function(t,e){var a=t.components,n=t.mdxType,b=t.originalType,l=t.parentName,i=o(t,["components","mdxType","originalType","parentName"]),d=u(a),O=n,j=d["".concat(l,".").concat(O)]||d[O]||p[O]||b;return a?r.a.createElement(j,c(c({ref:e},i),{},{components:a})):r.a.createElement(j,c({ref:e},i))}));function j(t,e){var a=arguments,n=e&&e.mdxType;if("string"==typeof t||n){var b=a.length,l=new Array(b);l[0]=O;var c={};for(var o in e)hasOwnProperty.call(e,o)&&(c[o]=e[o]);c.originalType=t,c.mdxType="string"==typeof t?t:n,l[1]=c;for(var i=2;i<b;i++)l[i]=a[i];return r.a.createElement.apply(null,l)}return r.a.createElement.apply(null,a)}O.displayName="MDXCreateElement"}}]);